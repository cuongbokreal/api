var ghim_content = `HOT: 🙆 Highlands đang tặng Voucher mua 2 tính tiền 1 free (áp dụng tại điểm bán):
<b>B1</b>: Truy cập trang nhận mã của Highlands tại https://shorten.asia/GFDwSf1s    
<b>B2</b>: Nhấn "Nhận mã ưu đãi ngay".
<b>B3</b>: Chụp ảnh màn hình voucher, áp mã tại điểm bán của Highland.
📌 Mã ưu đãi này không phải là mã cố định, mỗi máy khi nhấp vào sẽ có một mã ưu đãi riêng. Mọi người đến trực tiếp các cửa hàng của Highlands để đưa mã này cho nhân viên và nhận về ưu đãi. Mã có hiệu lực trong thời gian áp dụng ghi tại web.
<b>👉 Tips lấy không giới hạn mã:</b>
https://cuongbokit.blogspot.com/2022/10/cach-nhan-voucher-highlands-mua-2-tinh-1.html  `

var shopee_content = `<h2><b>SHOPEE</b></h2>
➖➖➖➖SHOPEE➖➖➖➖
🚛MIỄN PHÍ VẬN CHUYỂN:
• 0H: Tặng sẵn 3 mã Freeship 15K/25K trong ví: https://shope.ee/1LGPZOEGn0  (back vào 12H, 18H, 20H)
• 0H: Lưu mã Freeship Xtra 300K/100K tại: https://shope.ee/7pTy6OKKfu  (back vào 9H, 12H, 18H)
• Đổi mã Freeship giảm 50% tối đa 40K: https://shope.ee/40HBAQZjeK 
• Quay mã Freeship xu: https://shope.ee/l2P4tQoa 
.
🔥MÃ ÁP SẢN PHẨM CÓ TAG “VOUCHER XTRA”: back vào 9H, 12H, 18H
• 0H: Mã giảm 20% tối đa 150K/400K, 15% tối đa 100K/100K. Lưu mã tại: https://shope.ee/9pF4sZXKme 
• 0H: 81VCX500K giảm 15% tối đa 500K đơn từ 1500K. Nếu 0H không nhập tay được thì lưu tại: https://shope.ee/9pF4sZXKme 
.
🔥MÃ TOÀN SÀN - SHOPEEREWARDS: tùy hạng 
• 0H: Mã giảm 12% tối đa đến 3tr(back vào 9H, 12H, 15H, 18H, 21H)
• 9H: Back mã giảm 4%-7% tối đa 99K
=> Lưu mã tại: https://shope.ee/40HBAQZjeK 
.
🔥MÃ ÁP ĐA SỐ SẢN PHẨM:
• 0H: AFFCLU2 giảm 30% tối đa 30K đơn từ 99K. List sản phẩm áp mã: https://shope.ee/6KfCi9fzaj 
• AFFSL36 giảm 20% tối đa 25K đơn từ 50K. List sản phẩm áp mã: https://shope.ee/6ALhhmf7Lw 
.
🔥MÃ ÁP SHOPEEMALL: 
• 0H, 12H: Mã giảm 20% tối đa 45K đơn từ 150K
=> Lưu mã tại: https://shope.ee/6fI36lnSD6 
.
🔥MÃ LIVE:
• 0H: Có thể back mã toàn sàn giảm 20% tối đa 60K/250K, 75K/200K + giảm 30K/99K. Lưu mã tại giỏ live: https://shope.ee/2q5Ix8TXE3  
• 0H: Mã xtra giảm 50% tối đa 25K/0Đ, 30% tối đa 20K/0Đ, 20% tối đa 50K/100K tặng sẵn(back vào 11H, 20H, 22H). Tham khảo list: https://shope.ee/2ApYBRIn69  (chỉ đúng 80-90%, gắn không áp được thì đổi)
• 0H: Mã áp đa số giảm 20% tối đa 25K/0Đ, 10% tối đa 30K/0Đ tặng sẵn
• 0H: Mã thời trang giảm 12% tối đa 100K/350K, 15% tối đa 25K/0Đ tặng sẵn
. 
🔥MÃ VIDEO: 
• 0H: Back mã giảm 30K/99K, 60K/199K, 150K/399K. List sản phẩm áp mã: https://shope.ee/3feNWVpgU3 
• 0H: Back mã giảm 50% tối đa 25K/49K, 25% tối đa 50K/129K. List sản phẩm áp mã: https://shope.ee/VhNMuzW9x 
• Mã áp đa số giảm 30K/199K, 15K/69K(lọc bách hóa)
=> Lưu mã tại: https://shope.ee/qKDlWyJkR  
.
🔥MÃ ĐIỆN TỬ: 
• 0H: Mã giảm 10% tối đa 500K đơn từ 300K
• Mã điện tử giảm 11K/0Đ, 10% tối đa 1tr, 12% tối đa 200K 
=> Lưu mã tại: https://shope.ee/1ftN9ZtUnZ 
.
🔥SỨC KHỎE & THÚ CƯNG: https://shope.ee/509p7hyPAg 
• 0H: HEALTH30K8 giảm 10% tối đa 30K đơn từ 150K
• 0H: HEALTH100K8 giảm 7% tối đa 100K đơn từ 300K
• 0H: PET20K8 giảm 20K đơn từ 250K
• 0H: PET50K8 giảm 7% tối đa 50K đơn từ 350K
• 0H: HC15K8 giảm 10% tối đa 15K đơn từ 99K
• 0H: HC30K8 giảm 7% tối đa 30K đơn từ 169K
.
🔥SHOPEEFOOD: https://shope.ee/8Ujbj5PXzQ   
• 10H: VANNANG, VANNANG40, VANNANG70, VANNANG100 giảm 130K/130K, 40K/40K, 70K/70K, 100K/100K
• 14H: VANNANG, VANNANG30, VANNANG60, VANNANG90 giảm 130K/130K, 30K/30K, 60K/60K, 90K/90K
=> Xem chi tiết: https://shopeefood.vn/bo-suu-tap/deal-van-nang-ve-thang-0d 
.
🔥MÃ THỜI TRANG LÀM ĐẸP: 
• Mã giảm 14% tối đa 100K đơn từ 600K: https://shope.ee/7fAaHgxwQb 
• Mã giảm 14% tối đa 151K đơn từ 999K: https://shope.ee/8A6qsbwAwI 
• Mã giảm 14% tối đa 250K đơn từ 1tr599: https://shope.ee/6zutUT4k2T 
👉 Mở shopee nhanh tại đây giúp ad: https://shope.ee/9KIoHeiJPn 
.
🔥MÃ KHÁC: 
• NSF01P125 giảm 25K đơn từ 70K. List sản phẩm áp mã: https://shope.ee/20W39XUATL  
• NSF01P1HB giảm 25K đơn từ 55K. List sản phẩm áp mã: https://shope.ee/7pTq6GYMKe 
• FMCGTTS500K giảm 100K đơn từ 500K. List sản phẩm áp mã: https://shope.ee/6ALeXNAeBw 
• FMCGTTS50K giảm 15K đơn từ 50K. List sản phẩm áp mã: https://shope.ee/7KXbvWJGe9 
• FMCGTTS99K giảm 15% tối đa 100K đơn từ 99K. List sản phẩm áp mã: https://shope.ee/7znIik88W1 
• WCP2412 giảm 15% tối đa 35K đơn từ 200K. List sản phẩm áp mã: https://shope.ee/6Kf7972jOX 
• Mã shopeepay giảm 8K, 8% tại: https://shope.ee/4VDO89ke3B 
.
🔥GAME SHOPEE: 
• 0H, 9H: Mở hộp quà rewards: https://shope.ee/40HBAQZjeK  hoặc tại: https://shope.ee/2VSNNh5Vbm 
• 0H: Thử thách Shopee: https://shope.ee/B4SbPIebI 
• 0H: Số gì đây: https://shope.ee/8A6k86sb9I 
• 0H: Quay mã toàn sàn giảm 100K/100K, 20K/180K cho 0H dùng: https://shope.ee/602FY85WNR 
.
⚠️NOTE: Trước khi đặt hàng, bấm vào link này giúp ad đạt đủ KPI, để xin thêm nhiều voucher, ưu đãi xịn cho nhóm nhé: https://shope.ee/8KQAKQ0lNX `
var lazada_content = `<h2><b>LAZADA</b></h2>
➖➖➖➖LAZADA➖➖➖➖
🚛MIỄN PHÍ VẬN CHUYỂN:
• 0H: Lưu mã Freeship 20K/0Đ, 5K/19K, 15K/49K, 25K/125K, 50K/300K tại: https://s.lazada.vn/s.3i4Ix?cc  + https://s.lazada.vn/s.3i4Iy?cc 
.
🔥12H, 20H: MÃ TOÀN SÀN GIẢM 100K ĐƠN TỪ 500K: có thể lên trễ 1p
=> Lưu mã tại: https://s.lazada.vn/s.3i4Iz?cc  
.
🔥9H, 12H: LOẠT MÃ NGâN HÀNG, ZALOPAY, MOMO:
=> Lưu mã tại: https://s.lazada.vn/s.3i4IB?cc  
.
🔥DEAL TRỢ GIÁ, 1K, 9K, X9K:
• 0H: Deal hot 1K, 9K, dưới 49K: https://s.lazada.vn/s.3i4sU?cc  
• 0H, 12H, 20H: Deal trợ giá - flash sale: https://s.lazada.vn/s.3i4s0?cc  
• Choice: https://s.lazada.vn/s.3i4sb?cc  
• Deal dùng thử 9K, x9K: https://s.lazada.vn/s.3i4sX?cc  
.
🔥LAZGAME: 
• 0H: Đổi Gems lấy quà 0Đ, mã toàn sàn: https://s.lazada.vn/s.3i4sd?cc  
• 0H: Đổi sao: https://s.lazada.vn/s.3i4s4?cc  
• 0H: Đổi xu: https://s.lazada.vn/s.3i4s3?cc 
`
var tiki_content = `<b>TIKI</b>
➖➖➖➖TIKI➖➖➖➖
✨ Tiki ngon: https://shorten.asia/earBSNjs
► Lưu thêm các voucher từ shop bán tại banner.
.
🚛Freeship mỗi ngày, giao nhanh 2H: https://shorten.asia/TSqm9vJ3
.
🔥 Chăm bé cùng Tiki: https://shorten.asia/YuDQDeRx
.
🔥 Từ Lock&Lock: https://shorten.asia/PnNT8cvF
• Giảm 10k cho đơn từ 250k: https://tinyurl.com/28e8qqz6
• Giảm 20k cho đơn từ 399k: https://tinyurl.com/2a34kn68
• Giảm 50k cho đơn từ 799k: https://tinyurl.com/2yppz6wv
• Giảm 70k cho đơn từ 1499k: https://tinyurl.com/27cwyohd
• Giảm 100k cho đơn từ 1999k: https://tinyurl.com/2ddt8gfc
• Giảm 150k cho đơn từ 2999k: https://tinyurl.com/26pcwtu4
• Giảm 200K cho đơn từ 2000k: https://tinyurl.com/23elc3lx
• Giảm 100K cho đơn từ 600k: https://tinyurl.com/2cjesylb
=> Lựa thêm Deal Lock&Lock tại đây nha: https://www.trumgiamgia.net/2023/08/voucher-deal-lock-and-lock-tiki.html
.
🔥 Từ Sunhouse: https://shorten.asia/qw93evnm
• Giảm 10k cho đơn 199k: https://tinyurl.com/2xnzzzl8
• Giảm 20k cho đơn 299k: https://tinyurl.com/22cecf9a
• Giảm 40k cho đơn 469k: https://tinyurl.com/2acguhlw
• Giảm 60k cho đơn 550K: https://tinyurl.com/2amqevfk
• Giảm 70k cho đơn 700k: https://tinyurl.com/2bh7sd9l
• Giảm 100k cho đơn 850k: https://tinyurl.com/2cycoeay
• Giảm 300k cho đơn 2500k: https://tinyurl.com/25n6x8ze
• Giả̉m 200k cho đơn 1999k: https://tinyurl.com/24ya6buc
• giảm 500k cho đơn 3TR5: https://tinyurl.com/27cyr56g
• GIẢM 50K CHO ĐƠN 400K: https://tinyurl.com/29xulyrz
=> Lựa thêm Deal Sunhouse: https://www.trumgiamgia.net/2023/08/tong-hop-deal-sale-sunhouse-tiki.html
.
🔥 Rẻ mỗi ngày: https://tinyurl.com/2bxe8p3d  
🔥 Chính hãng xả kho: https://tinyurl.com/2aosaojn  
🔥 Điện máy: https://tinyurl.com/26g7td5u  
🔥 Làm đẹp & sức khỏe: https://tinyurl.com/23g755gm 
🔥 Tổng Hợp DEAL Mẹ&Bé TIKI 8.8: https://www.trumgiamgia.net/2023/08/tong-hop-deal-me-be-tiki.html
🔥 Tổng Hợp Deal Sức Khỏe & Sắc Đẹp TIKI 8.8: https://www.trumgiamgia.net/2023/08/tong-hop-deal-suc-khoe-sac-dep-tiki.html
🔥 Các deal ngành hàng khác Ad sẽ cập nhật tiếp tại https://www.trumgiamgia.net/ `


var overlay = document.getElementById('overlay');
  var popupContainer = document.getElementById('popupContainer');
  var popupContent = document.getElementById('popupContent');

shopee_content = shopee_content.replaceAll('\n','<br>');
lazada_content = lazada_content.replaceAll('\n','<br>');
tiki_content = tiki_content.replaceAll('\n','<br>');

document.querySelector('#shopee_space').innerHTML = shopee_content;
document.querySelector('#lazada_space').innerHTML = lazada_content;
document.querySelector('#tiki_space').innerHTML = tiki_content;

/*===SETUP NGÀY GIỜ===*/
var updateTime = new Date(); //updateTime
  var today = `${updateTime.getDate()}/${updateTime.getMonth() + 1}`;
  var thisHour = updateTime.getHours();
  var sale_hour = 0;
  if(thisHour >= 0 && thisHour <= 3){saleHour = 0}else
  if(thisHour >= 3 && thisHour <= 6){saleHour = 3}else
  if(thisHour >= 6 && thisHour <= 9){saleHour = 9}else
  if(thisHour > 9 && thisHour <= 11){saleHour = 11}else
  if(thisHour > 11 && thisHour <= 12){saleHour = 12}else
  if(thisHour > 12 && thisHour <= 13){saleHour = 13}else
  if(thisHour > 13 && thisHour <= 14){saleHour = 14}else
  if(thisHour > 14 && thisHour <= 15){saleHour = 15}else
  if(thisHour > 15 && thisHour <= 16){saleHour = 16}else
  if(thisHour > 16 && thisHour <= 17){saleHour = 17}else
  if(thisHour > 17 && thisHour <= 18){saleHour = 18}else
  if(thisHour > 18 && thisHour <= 19){saleHour = 19}else
  if(thisHour > 19 && thisHour <= 20){saleHour = 20}else
  if(thisHour > 20 && thisHour <= 21){saleHour = 21}else
  if(thisHour > 21 && thisHour <= 22){saleHour = 22}else
  if(thisHour > 22 && thisHour <= 23){saleHour = 23}else
  if(thisHour >= 23){saleHour = 0; today = `${updateTime.getDate() +1}/${updateTime.getMonth() + 1}`;}
  
  console.log(saleHour)
  document.querySelector('#sale_time').innerText = `${saleHour}`;
  document.querySelector('#sale_day').innerText = today;

var api_mgg_content = ghim_content + 
  `<div data-html="" onclick="popup(document.querySelector('#shopee_space').innerHTML)">Xem mã SHOPEE ${today}</div>
  <div data-html="" onclick="popup(document.querySelector('#lazada_space').innerHTML)">Xem mã LAZADA ${today}</div>
  <div data-html="" onclick="popup(document.querySelector('#tiki_space').innerHTML)">Xem mã TIKI ${today}</div>` ; 
console.log(api_mgg_content)

document.getElementById('tonghop').innerHTML = api_mgg_content.replaceAll('\n', '<br/>');
  
$("#tonghop").each(function(){
   $(this).html( $(this).html().replace(/((http|https|ftp):\/\/[\w?=&.\/-;#~%-]+(?![\w\s?&.\/;#~%"=-]*>))/g, '<a rel="nofollow" target="_blank" href="$1">$1</a> ') );
});

function encodeHTML(input) {
    return input.replace(/&/g, "&amp;")
                .replace(/</g, "&lt;")
                .replace(/>/g, "&gt;")
                .replace(/"/g, "&quot;")
                .replace(/'/g, "&#39;");
}
function decodeHTML(input) {
    var doc = new DOMParser().parseFromString(input, "text/html");
    return doc.documentElement.textContent;
}
function popup(htmlContent) {
    popupContent.innerHTML = decodeHTML(htmlContent).replaceAll('\n','<br/>');
    popupContainer.style.display = 'block';
    overlay.style.display = 'block';
    popupContainer.focus()
    setTimeout(function() {
      popupContainer.style.opacity = '1';
    }, 10);
    
    $("#popupContent").each(function(){
     $(this).html( $(this).html().replace(/((http|https|ftp):\/\/[\w?=&.\/-;#~%-]+(?![\w\s?&.\/;#~%"=-]*>))/g, '<a rel="nofollow" target="_blank" href="$1">$1</a> ') );
    });
  }

  function closePopup() {
    popupContainer.style.opacity = '0';
    overlay.style.display = 'none';
    setTimeout(function() {
      popupContainer.style.display = 'none';
    }, 300);
  }

  overlay.addEventListener('click', function() {
    closePopup();
  });
