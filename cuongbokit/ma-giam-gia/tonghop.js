var ghim_content = `HOT: 🙆 Highlands đang tặng Voucher mua 2 tính tiền 1 free (áp dụng tại điểm bán):
<b>B1</b>: Truy cập trang nhận mã của Highlands tại https://shorten.asia/GFDwSf1s    
<b>B2</b>: Nhấn "Nhận mã ưu đãi ngay".
<b>B3</b>: Chụp ảnh màn hình voucher, áp mã tại điểm bán của Highland.
📌 Mã ưu đãi này không phải là mã cố định, mỗi máy khi nhấp vào sẽ có một mã ưu đãi riêng. Mọi người đến trực tiếp các cửa hàng của Highlands để đưa mã này cho nhân viên và nhận về ưu đãi. Mã có hiệu lực trong thời gian áp dụng ghi tại web.
<b>👉 Tips lấy không giới hạn mã:</b>
https://cuongbokit.blogspot.com/2022/10/cach-nhan-voucher-highlands-mua-2-tinh-1.html  `

var shopee_content = `<h2><b>SHOPEE</b></h2>
➖➖➖➖SHOPEE➖➖➖➖
🚛MIỄN PHÍ VẬN CHUYỂN:
• 18H: Back mã Freeship Xtra 300K/100K tại: https://shope.ee/LODupRFwf 
• Tặng sẵn 3 mã Freeship 15K/25K trong ví: https://shope.ee/8Ujmt2QDST 
• Đổi mã Freeship giảm 50% tối đa 40K: https://shope.ee/8KQMgjVBJg 
• Quay mã Freeship xu: https://shope.ee/8pMdHeXg5D 
.
🔥MÃ ÁP SẢN PHẨM CÓ TAG “VOUCHER XTRA”:
• 18H: Back mã giảm 20% tối đa 150K/400K, 15% tối đa 100K/100K
=> Lưu mã tại: https://shope.ee/9KIufjS8Gu  
.
🔥HÀNG QUỐC TẾ: https://shope.ee/6fIIeYvIC8 
• 21H: CBNUCLEAR giảm 100K đơn từ 300K. List sản phẩm áp mã: https://shope.ee/3L1qgRq7J7  (back)
.
🔥LAMY: https://shope.ee/1AxKuMAsu8 
• 21H: LAMY100K2 (mã shop) giảm 200K đơn từ 400K
.
🔥MÃ LIVE:
• 20H, 22H: Back mã xtra giảm 50% tối đa 25K/0Đ, 30% tối đa 20K/0Đ, 20% tối đa 50K/100K tặng sẵn. Tham khảo list: https://shope.ee/5fPbu2pFAG  (chỉ đúng 80-90%, gắn không áp được thì đổi)
• Mã áp đa số giảm 20% tối đa 25K/0Đ, 10% tối đa 30K/0Đ tặng sẵn
• Mã thời trang giảm 12% tối đa 100K/350K, 15% tối đa 25K/0Đ tặng sẵn
. 
🔥MÃ VIDEO: 
• Mã giảm 30K/99K, 60K/199K. List sản phẩm áp mã: https://shope.ee/8KQVRXaOkm 
• Mã giảm 25% tối đa 50K/129K. List sản phẩm áp mã:  https://shope.ee/4KuLhnSMls 
• Mã giảm 30K/199K, 15K/69K áp đa số
=> Lưu mã tại: https://shope.ee/3VLA6jg159 
.
🔥MÃ ÁP ĐA SỐ SẢN PHẨM:
• AFFFB78 giảm 20% tối đa 30K đơn từ 88K. List sản phẩm áp mã: https://shope.ee/Vhe78iMG8 
• AFFDA01 giảm 30K đơn từ 99K. List sản phẩm áp mã: https://shope.ee/g13L3TC8E 
.
🔥MÃ KHÁC: 
• NSF01HBRE giảm 25K đơn từ 50K. List sản phẩm áp mã: https://shope.ee/4KuEiYTAF0 
• FMCGTTS500K giảm 100K đơn từ 500K. List sản phẩm áp mã: https://shope.ee/1qD2tfrh5T 
• FMCGTTS50K giảm 15K đơn từ 50K. List sản phẩm áp mã: https://shope.ee/20WT5yZb8y 
• FMCGTTS99K giảm 15% tối đa 100K đơn từ 99K. List sản phẩm áp mã: https://shope.ee/2fm9tCbBWS 
• WCP2412 giảm 15% tối đa 35K đơn từ 200K. List sản phẩm áp mã: https://shope.ee/4fX4iDEm3f 
• Mã shopeepay giảm 8K, 8% tại: https://shope.ee/2q5WubnC6Y 
.
🔥GAME SHOPEE: 
• Mở hộp quà rewards: https://shope.ee/8KQMgjVBJg  hoặc tại: https://shope.ee/4VDe7hIyLw 
• Thử thách Shopee: https://shope.ee/4fX4K0IPHH 
• Số gì đây: https://shope.ee/2flzwKPx4l 
• Quay mã toàn sàn giảm 100K/100K, 20K/180K cho 0H dùng: https://shope.ee/3VL6vrRBAI 
.
⚠️NOTE: Trước khi đặt hàng, bấm vào link này giúp ad đạt đủ KPI, để xin thêm nhiều voucher, ưu đãi xịn cho nhóm nhé: https://shope.ee/3pxxKTPyke 
`;

var lazada_content = `➖➖➖➖LAZADA➖➖➖➖
🔥MiniGame độc quyền nhận voucher đến 2tr: https://www.facebook.com/groups/584602429633228/posts/1087549199338546 
.
🚛MIỄN PHÍ VẬN CHUYỂN:
• Lưu mã Freeship 20K/0Đ, 5K/19K, 15K/49K, 25K/125K, 50K/300K tại: https://s.lazada.vn/s.3PMX1?cc  + https://s.lazada.vn/s.3PMcL?cc 
.
🔥BANNER SĂN MÃ TOÀN SÀN, FREESHIP LAZ: 
• 18H, 21H: Mã nhập tay giảm 50K đơn từ 200K
• 19H, 21H: Mã nhập tay giảm 111K đơn từ 300K
• 20H: Lưu mã giảm 25K đơn từ 99K
• 20H: Mã nhập tay giảm 50K/99K, 150K/500K
• 20H30: Lưu mã giảm 50K đơn từ 250K
• 20H, 21H: Lưu mã Freeship giảm 25K đơn từ 150K
=> Săn mã tại: https://s.lazada.vn/s.3PMX0?cc 
.
🔥20H: MÃ TOÀN SÀN GIẢM 240K ĐƠN TỪ 800K:
=> Lưu mã tại: https://s.lazada.vn/s.3PMcn?cc 
.
🔥20H: MÃ NHẬP TAY GIẢM 100K ĐƠN TỪ 500K:
=> Săn mã tại: https://s.lazada.vn/s.3PMcQ?cc 
.
🔥LOẠT MÃ GIẢM 100K/500K TRÊN Ô TÌM KIẾM CÒN LƯỢT:
• https://s.lazada.vn/s.3PMcr?cc  
• https://s.lazada.vn/s.3PMcO?cc 
• https://s.lazada.vn/s.3PMcs?cc  
• https://s.lazada.vn/s.3PMci?cc 
• https://s.lazada.vn/s.3PMcl?cc  
• https://s.lazada.vn/s.3PMcD?cc 
=> Lựa sản phẩm tại: https://s.lazada.vn/s.3PMcQ?cc 
.
🔥DEAL TRỢ GIÁ, 1K, 9K, X9K:
• 20H: Deal trợ giá - flash sale: https://s.lazada.vn/s.3PMcy?cc  
• Deal hot 1K, 9K, dưới 49K: https://s.lazada.vn/s.3PMcA?cc  
• Choice: https://s.lazada.vn/s.3PMXZ?cc  
• Deal dùng thử 9K, x9K: https://s.lazada.vn/s.3PMcu?cc  
.
🔥LAZGAME: 
• Đổi Gems lấy quà 0Đ, mã toàn sàn: https://s.lazada.vn/s.3PMcH?cc 
• Đổi sao: https://s.lazada.vn/s.3PMct?cc  
• Đổi xu: https://s.lazada.vn/s.3PMcE?cc 
.
🔥20H: LƯU VOUCHER BONUS GIẢM ĐẾN 800K: https://s.lazada.vn/s.3PMcn?cc `
var tiki_content = `<b>TIKI</b>
➖➖➖➖TIKI➖➖➖➖
✨ Tiki ngon: https://shorten.asia/earBSNjs
► Lưu thêm các voucher từ shop bán tại banner.
.
🚛Freeship mỗi ngày, giao nhanh 2H: https://shorten.asia/TSqm9vJ3
.
🔥 Chăm bé cùng Tiki: https://shorten.asia/YuDQDeRx
.
🔥 Từ Lock&Lock: https://shorten.asia/PnNT8cvF
• Giảm 10k cho đơn từ 250k: https://tinyurl.com/28e8qqz6
• Giảm 20k cho đơn từ 399k: https://tinyurl.com/2a34kn68
• Giảm 50k cho đơn từ 799k: https://tinyurl.com/2yppz6wv
• Giảm 70k cho đơn từ 1499k: https://tinyurl.com/27cwyohd
• Giảm 100k cho đơn từ 1999k: https://tinyurl.com/2ddt8gfc
• Giảm 150k cho đơn từ 2999k: https://tinyurl.com/26pcwtu4
• Giảm 200K cho đơn từ 2000k: https://tinyurl.com/23elc3lx
• Giảm 100K cho đơn từ 600k: https://tinyurl.com/2cjesylb
=> Lựa thêm Deal Lock&Lock tại đây nha: https://www.trumgiamgia.net/2023/08/voucher-deal-lock-and-lock-tiki.html
.
🔥 Từ Sunhouse: https://shorten.asia/qw93evnm
• Giảm 10k cho đơn 199k: https://tinyurl.com/2xnzzzl8
• Giảm 20k cho đơn 299k: https://tinyurl.com/22cecf9a
• Giảm 40k cho đơn 469k: https://tinyurl.com/2acguhlw
• Giảm 60k cho đơn 550K: https://tinyurl.com/2amqevfk
• Giảm 70k cho đơn 700k: https://tinyurl.com/2bh7sd9l
• Giảm 100k cho đơn 850k: https://tinyurl.com/2cycoeay
• Giảm 300k cho đơn 2500k: https://tinyurl.com/25n6x8ze
• Giả̉m 200k cho đơn 1999k: https://tinyurl.com/24ya6buc
• giảm 500k cho đơn 3TR5: https://tinyurl.com/27cyr56g
• GIẢM 50K CHO ĐƠN 400K: https://tinyurl.com/29xulyrz
=> Lựa thêm Deal Sunhouse: https://www.trumgiamgia.net/2023/08/tong-hop-deal-sale-sunhouse-tiki.html
.
🔥 Rẻ mỗi ngày: https://tinyurl.com/2bxe8p3d  
🔥 Chính hãng xả kho: https://tinyurl.com/2aosaojn  
🔥 Điện máy: https://tinyurl.com/26g7td5u  
🔥 Làm đẹp & sức khỏe: https://tinyurl.com/23g755gm 
🔥 Tổng Hợp DEAL Mẹ&Bé TIKI 8.8: https://www.trumgiamgia.net/2023/08/tong-hop-deal-me-be-tiki.html
🔥 Tổng Hợp Deal Sức Khỏe & Sắc Đẹp TIKI 8.8: https://www.trumgiamgia.net/2023/08/tong-hop-deal-suc-khoe-sac-dep-tiki.html
🔥 Các deal ngành hàng khác Ad sẽ cập nhật tiếp tại https://www.trumgiamgia.net/ `


var overlay = document.getElementById('overlay');
var popupContainer = document.getElementById('popupContainer');
var popupContent = document.getElementById('popupContent');

shopee_content = shopee_content;
lazada_content = lazada_content;
tiki_content = tiki_content;

document.querySelector('#shopee_space').innerHTML = shopee_content.replaceAll('\n','<br/>');
document.querySelector('#lazada_space').innerHTML = lazada_content.replaceAll('\n','<br/>');
document.querySelector('#tiki_space').innerHTML = tiki_content.replaceAll('\n','<br/>');

/*===SETUP NGÀY GIỜ===*/
var updateTime = new Date(); //updateTime
  var today = `${updateTime.getDate()}/${updateTime.getMonth() + 1}`;
  var thisHour = updateTime.getHours();
  var sale_hour = 0;
  if(thisHour >= 0 && thisHour <= 3){saleHour = 0}else
  if(thisHour >= 3 && thisHour <= 6){saleHour = 3}else
  if(thisHour >= 6 && thisHour <= 9){saleHour = 9}else
  if(thisHour > 9 && thisHour <= 11){saleHour = 11}else
  if(thisHour > 11 && thisHour <= 12){saleHour = 12}else
  if(thisHour > 12 && thisHour <= 13){saleHour = 13}else
  if(thisHour > 13 && thisHour <= 14){saleHour = 14}else
  if(thisHour > 14 && thisHour <= 15){saleHour = 15}else
  if(thisHour > 15 && thisHour <= 16){saleHour = 16}else
  if(thisHour > 16 && thisHour <= 17){saleHour = 17}else
  if(thisHour > 17 && thisHour <= 18){saleHour = 18}else
  if(thisHour > 18 && thisHour <= 19){saleHour = 19}else
  if(thisHour > 19 && thisHour <= 20){saleHour = 20}else
  if(thisHour > 20 && thisHour <= 21){saleHour = 21}else
  if(thisHour > 21 && thisHour <= 22){saleHour = 22}else
  if(thisHour > 22 && thisHour <= 23){saleHour = 23}else
  if(thisHour >= 23){saleHour = 0; today = `${updateTime.getDate() +1}/${updateTime.getMonth() + 1}`;}
  
console.log(saleHour)
document.querySelector('#sale_time').innerText = `${saleHour}`;
document.querySelector('#sale_day').innerText = today;

var api_mgg_content = ghim_content + '<br/><br/>' +
  `<div class="view_mgg_more" data-html="" onclick="popup(document.querySelector('#shopee_space').innerHTML)"><i class="fa-solid fa-arrow-right"></i> Xem mã SHOPEE ${today}</div>
  <div class="view_mgg_more" data-html="" onclick="popup(document.querySelector('#lazada_space').innerHTML)"><i class="fa-solid fa-arrow-right"></i> Xem mã LAZADA ${today}</div>
  <div class="view_mgg_more" data-html="" onclick="popup(document.querySelector('#tiki_space').innerHTML)"><i class="fa-solid fa-arrow-right"></i> Xem mã TIKI ${today}</div>` ; 
console.log(api_mgg_content)

document.getElementById('tonghop').innerHTML = api_mgg_content.replaceAll('\n', '<br/>');
$("#tonghop").each(function(){
   $(this).html( $(this).html().replace(/((http|https|ftp):\/\/[\w?=&.\/-;#~%-]+(?![\w\s?&.\/;#~%"=-]*>))/g, '<a rel="nofollow" target="_blank" href="$1">$1</a> ') );
});



function encodeHTML(input) {
    return input.replace(/&/g, "&amp;")
                .replace(/</g, "&lt;")
                .replace(/>/g, "&gt;")
                .replace(/"/g, "&quot;")
                .replace(/'/g, "&#39;");
}
function decodeHTML(input) {
    var doc = new DOMParser().parseFromString(input, "text/html");
    return doc.documentElement.textContent;
}
function popup(htmlContent) {
    popupContent.innerHTML = decodeHTML(htmlContent).replaceAll('\n','<br/>');
    console.log(popupContent.innerHTML)
    popupContainer.style.display = 'block';
    overlay.style.display = 'block';
    popupContainer.focus()
    setTimeout(function() {
      popupContainer.style.opacity = '1';
    }, 10);
    
    $("#popupContent").each(function(){
     $(this).html( $(this).html().replace(/((http|https|ftp):\/\/[\w?=&.\/-;#~%-]+(?![\w\s?&.\/;#~%"=-]*>))/g, '<a rel="nofollow" target="_blank" href="$1">$1</a> ') );
    });
  }

  function closePopup() {
    popupContainer.style.opacity = '0';
    overlay.style.display = 'none';
    setTimeout(function() {
      popupContainer.style.display = 'none';
    }, 300);
  }

  overlay.addEventListener('click', function() {
    closePopup();
  });
